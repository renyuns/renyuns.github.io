var ImgPath='http://file.pemarket.com.cn/';if(window.location.href.indexOf('pemarket')===-1){ImgPath='http://192.168.230.115:6677/'}var deviceCore={_ua:navigator.userAgent.toLowerCase(),_getVersion:function _getVersion(nece){var arr=(nece+'').split(".");return parseFloat("".concat(arr[0],".").concat(arr[1]))},_detect:function _detect(kernel){var reg=new RegExp(kernel,"img");return reg.test(deviceCore._ua)}};var device={isClient:function isClient(){return deviceCore._detect("xiangmugongchang")},isIOS:function isIOS(){return deviceCore._detect("iPhone|iPad|iPod|iOS|mac os")},isAndroid:function isAndroid(){return deviceCore._detect("Android")},isUCBrowser:function isUCBrowser(){return deviceCore._detect("UCBrowser")},isQQBrowser:function isQQBrowser(){return deviceCore._detect("QQBrowser")},isWeiBo:function isWeiBo(){return deviceCore._detect("WeiBo")},isWeixin:function isWeixin(){return deviceCore._detect("MicroMessenger")},isAlipay:function isAlipay(){return deviceCore._detect("Alipay")},isPC:function isPC(){return!deviceCore._detect("xiangmugongchang|phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone")&&window.innerWidth>460},qqBrowserVersion:function qqBrowserVersion(){return device.isQQBrowser()?deviceCore._getVersion(deviceCore._ua.split("mqqbrowser/")[1]):0},ucBrowserVersion:function ucBrowserVersion(){return device.isUCBrowser()?deviceCore._getVersion(deviceCore._ua.split("ucbrowser/")[1]):0},iOSVersion:function iOSVersion(){return device.isIOS()?parseInt(deviceCore._ua.match(/\s*os\s*\d+/gi)[0].split(" ")[2],10):0}};function getUrlParam(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var result=window.location.search.substr(1).match(reg);return result?decodeURIComponent(result[2]):null}function getFormatDate(format,dateTime){var date={"M+":dateTime.getMonth()+1,"D+":dateTime.getDate(),"h+":dateTime.getHours(),"m+":dateTime.getMinutes(),"s+":dateTime.getSeconds(),"q+":Math.floor((dateTime.getMonth()+3)/3),"S+":dateTime.getMilliseconds()};if(/(y+)/i.test(format)){format=format.replace(RegExp.$1,(dateTime.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in date){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?date[k]:("00"+date[k]).substr((""+date[k]).length))}}return format}function showToast(text,duration){if($(".pem-toast").length===0){$("body").append('<div class="pem-toast hide"><span class="pem-toast-inner"></span></div>')}var durationtime=+duration>0?+duration:2000;$(".pem-toast").addClass("pem-toast-fade-enter-active").show();$(".pem-toast .pem-toast-inner").html(text||"请求失败,请重试");setTimeout(function(){hideToast()},durationtime)}function hideToast(){$(".pem-toast").hide()}function pemShare(paramObj,callback){var options=paramObj||{};var defaultObj={title:options.title||"为您推荐项目工场",timelineTitle:options.timelineTitle||"",content:options.content||"我正在使用项目工场，有料的BP、有趣的VC都在这儿，一起来看项目吧！",imgUrl:options.imgUrl||"http://m.pemarket.com.cn/static/logo.png",linkUrl:options.linkUrl||window.location.href};function loadWechat(appId,timestamp,nonceStr,signature){var param={debug:false,appId:appId,timestamp:timestamp,nonceStr:nonceStr,signature:signature,jsApiList:["checkJsApi","updateTimelineShareData","updateAppMessageShareData","previewImage"]};wx.config(param);var shareOptionsAppMessage={title:defaultObj.title,desc:defaultObj.content,link:defaultObj.linkUrl,imgUrl:defaultObj.imgUrl,success:function success(res){}};var shareOptionsTimeline={title:defaultObj.timelineTitle||defaultObj.title,link:defaultObj.linkUrl,imgUrl:defaultObj.imgUrl,success:function success(res){}};wx.ready(function(){wx.updateTimelineShareData(shareOptionsTimeline);wx.updateAppMessageShareData(shareOptionsAppMessage)});wx.error(function(res){})}if(device.isWeixin()){$.ajax({type:"POST",contentType:"application/json",url:window.location.origin+"/api/wechat/signature/getSignature",dataType:"json",data:JSON.stringify({paramUrl:window.location.href}),success:function(data){if(data&&data.url){loadWechat(data.appId,data.timestamp,data.nonceStr,data.signature)}},error:function(xhr,status,error){}})}}